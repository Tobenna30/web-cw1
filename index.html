<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>After School Activities</title>
  <script src="https://unpkg.com/vue@2.7.8/dist/vue.js"></script>
</head>
<body>
  <div id="app">
    <div>
      <div>
        <label for="sort">Sort By:</label>
        <select id="sort" v-model="sortBy">
          <option value="subject">Subject</option>
          <option value="location">Location</option>
          <option value="price">Price</option>
          <option value="spaces">Spaces</option>
        </select>
        <select v-model="sortOrder">
          <option value="asc">Ascending</option>
          <option value="desc">Descending</option>
        </select>
        <button @click="goToCartPage">Shopping Cart</button>
      </div>
      <input v-model="searchTerm" @input="filterLessons" placeholder="Search Lessons...">
      <div>
        <div v-for="lesson in filteredLessons" :key="lesson.id">
          <div class="lesson">
            <p>Subject: {{ lesson.subject }}</p>
            <p>Location: {{ lesson.location }}</p>
            <p>Price: ${{ lesson.price }}</p>
            <p>Spaces: {{ lesson.spaces }}</p>
            <button @click="addToCart(lesson)" :disabled="lesson.spaces === 0">Add to Cart</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="cartApp" style="display: none;">
    <h1>Shopping Cart</h1>
    <div v-if="cart.length === 0">No items in the cart</div>
    <div v-for="cartItem in cart" :key="cartItem.id">
      <div class="cart-item">
        <p>Subject: {{ cartItem.subject }}</p>
        <p>Location: {{ cartItem.location }}</p>
        <p>Price: ${{ cartItem.price }}</p>
        <button @click="removeFromCart(cartItem)">Remove from Cart</button>
      </div>
    </div>
    <input v-model="name" placeholder="Name">
    <input v-model="phone" placeholder="Phone Number">
    <button @click="checkout" :disabled="!validInput">Checkout</button>
    <p v-if="orderSubmitted">Order has been submitted!</p>
  </div>

  <script>
    const app = new Vue({
      el: '#app',
      data: {
        lessons: [
          // Existing lessons data...
        ],
        sortBy: 'subject',
        sortOrder: 'asc',
        searchTerm: '',
      },
      computed: {
        sortedLessons() {
          // Existing sorting logic...
        },
        filteredLessons() {
          // Existing filtering logic...
        },
      },
      methods: {
        addToCart(lesson) {
          // Existing logic to add to cart...
        },
        goToCartPage() {
          document.getElementById('app').style.display = 'none';
          document.getElementById('cartApp').style.display = 'block';
        },
        filterLessons() {
          // Existing filter lessons logic...
        },
      },
    });

    new Vue({
      el: '#cartApp',
      data: {
        cart: [],
        name: '',
        phone: '',
        orderSubmitted: false,
      },
      mounted() {
        this.cart = JSON.parse(localStorage.getItem('cart')) || [];
      },
      computed: {
        validInput() {
          return /^[A-Za-z\s]+$/.test(this.name) && /^\d+$/.test(this.phone);
        },
      },
      methods: {
        removeFromCart(cartItem) {
          // Existing remove from cart logic...
        },
        checkout() {
          if (this.validInput) {
            // Existing checkout logic...
          }
        },
      },
    });
  </script>

  <style>
    .lesson {
      border: 1px solid #ccc;
      padding: 10px;
      margin: 10px 0;
    }
    .cart-item {
      border: 1px solid #ccc;
      padding: 10px;
      margin: 10px 0;
    }
  </style>
</body>
</html>
